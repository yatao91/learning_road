## 数组: 为什么很多编程语言中数组都是从 0 开始编号?

#### 一. 数组的概念

**数组(Array)**是一种**线性表**数据结构. 它用一组**连续的内存空间**, 来存储一组具有**相同类型的数据**.

- 线性表

  线性表就是数据排成像一条线一样的结构. 每个线性表最多只有前和后两个方向.下图所示线性表结构的数据结构.

  ![img](https://tva1.sinaimg.cn/large/008eGmZEly1gohkdmh1ezj30vq0n5acy.jpg)

- 非线性表

  比如二叉树/堆/图等. 非线性即数据之间并不是简单的前后关系. 如下图所示:

  ![img](https://tva1.sinaimg.cn/large/008eGmZEly1gohkelwobsj30vq0k7t9p.jpg)

- 连续的内存空间和相同类型的数据

#### 二. 数组的随机访问

- 一维数组`a[i]`寻址公式:

  `a[i]_address = base_address + i * data_type_size`

- 二维数组 `a[i][j](i < m , j < n)`寻址公式:

  `a[i][j]_address = base_address + ( i * n + j) * data_type_size`

- 数组支持随机访问, 根据下标随机访问的时间复杂度为 O(1).

#### 三. 数组的低效"插入"和"删除"

数组为了保持内存数据的连续性, 插入删除过程中会涉及到数据的移动.

1. 插入
   - 最好时间复杂度: O(1)--数组末尾插入
   - 最坏时间复杂度: O(n)--数组开头插入
   - 平均时间复杂度: O(n)
   - 如果数组中数据无规律, 仅作为存储集合. 如果将某个元素插入到位置 k,为了避免移动大量数据, 可以直接将位置 k 的数据移到数组元素的最后, 把心元素直接放到位置 k. 复杂度即会降至 O(1)
2. 删除
   - 最好时间复杂度: O(1)--数组末尾删除
   - 最坏时间复杂度: O(n)--数组开头删除
   - 平均时间复杂度: O(n)
   - 标记清除机制: 通过记录多个已经删除的数据, 当数组没有更多存储空间时, 触发一次真正的删除操作, 将降低删除导致的数据搬移.

#### 四. 数组访问越界问题

数组访问越界无论在何种编程语言中, 都会带来副作用, 要么导致不可控行为(比如 C 语言中的数组越界是一种未决行为), 要么抛出对应编程语言的越界异常.

#### 五. 为什么大多数编程语言中, 数组从 0 开始编号, 而不是从 1 开始?

1. 从偏移(offset)的角度理解 a[0] 0为偏移量, 如果从 1 计数, 对于 CPU 而言多了一次减法操作, 为了效率的优化, 减少一次减法运算, 数组选择了从 0 开始.
2. 有一定的历史原因: C语言从 0 开始计数, 导致后续的语言大多进行了效仿.

